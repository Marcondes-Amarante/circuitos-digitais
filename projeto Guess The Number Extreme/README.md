# Relatório: projeto guess the number extreme

O projeto Guess the number extreme é um jogo em que dois jogadores competem para adivinhar um ponto no espaço, representado por coordenadas x e y, cada uma sendo um número de 4 bits escolhido aleatoriamente. Cada jogador terá a oportunidade de fazer um palpite por vez, indicando uma combinação de coordenadas.

O jogo fornecerá informações sobre a relação entre a soma das coordenadas chutadas e a soma das coordenadas reais do ponto oculto. Ele indicará se a soma das coordenadas é maior, menor ou igual à soma das coordenadas do ponto oculto. Além disso, o jogo informará se o jogador acertou exatamente as coordenadas. Em caso de acerto, um ponto será adicionado ao placar do jogador correspondente e um novo ponto oculto será gerado.

Cada jogador terá um cronômetro associado, que começará a decrementar assim que for a sua vez de fazer um palpite. Ganha o jogador que acertar 15 coordenadas primeiro ou, caso nenhum jogador tenha atingido esse objetivo, aquele que tiver acumulado mais pontos quando ambos os tempos dos jogadores se esgotarem.

# Circuito main: 

O circuito main, referente a interface do jogo propriamente dita pode se analisado como três seções distintas, a primeira relacionada a lógica de controle das rodadas e chutes efetuados por ambos os jogadores, a segunda relacionada a configuração do cronômetro e a correlação de suas métricas com as demais funcionalidades do circuito/jogo, e a terceira relativa a correlação do circuito core com as métricas/leds de andamento do jogo e progresso dos jogadores.

A primeira parte é primordialmente composta por 4 bits conectados a um distribuidor de 4 entradas que direciona seu sinal simultaneamente a um display hexadecimal e um multiplexador enquanto entrada 1, estando a entrada 0 vazia, cujo seletor recebe sinal de uma saída do circuito cronômetro responsável por sinalizar quando todos os dígitos do cronômetro estiverem zerados, isso nos permite que o jogador se encontre impossibilitado de chutar coordenadas caso o tempo do seu cronômetro se esgote. Por continuidade a saída do multiplexador é direcionada a um circuito negador que converte o número, seja ele positivo ou negativo, ao seu equivalente oposto (se positivo passa a negativo e vice-versa), seu sinal, por sua vez é apenas repassado quando verificado que o dígito A3 é 1, caso contrário o sinal original conectado a entrada 0 do mux é direcionado normalmente ao restante do circuito, a mesma lógica repete-se do lado do jogador B com as devidas modificações a fim de garantir o correto funcionamento do mesmo, nesse sentido antes de chegar aos displays hexadecimais responsáveis pela exibição do chute X e Y efetuados, o sinal dos quatro dígitos passa por um subcircuito denominado número escolhido, que
recebe tanto o sinal de 4 bits de A e B, assim como o estado de X referente ao jogador em questão.

Internamente o subcircuito número escolhido é composto por um multiplexador que recebe o número escolhido de A como entrada 0 e o número escolhido de B como entrada 1, além é claro de um seletor que recebe o sinal do estado X, repassando A quando x for 0, e B quando X for 1, esse sinal por sua vez é direcionado a um distribuidor que direciona cada um dos quatro bit a um flip flop d, e tem sua saídas Q conectadas a um distribuidor que direciona os bits armazenados conforme a ativação do clock e do enable ativado pela entrada próximo, a uma saída de 4 bits, isso permite que possamos direcionar o número escolhido correto correspondente ao jogador referente a rodada atual.

![subcircuito número escolhido](https://github.com/Marcondes-Amarante/circuitos-digitais/assets/117780345/45128dd0-ca0b-4b72-8c4b-386c33d8178c)

Voltando ao circuito main a saída do subcircuito número escolhido é encaminhada a outro subcircuito chamado ativador de sinal cuja saída aciona um led caso verificado que o número escolhido original ao passar por um negador da origem a um número complementado cujo bit A3 é igual a 1, e o sinal do jogador A ou jogador B é 1, sendo esse sinal originado por dois flip flops D do main, o primeiro referente ao jogador A que tem como clock o sinal do botão chutar e como excitação o sinal originado por um AND entre o estado X negado do jogador e o sinal do bit A3, armazenado 1 caso x seja 0 e o bit A3 seja 1, da mesma forma para B o equivalente ocorre se ambos forem 1.

![subcircuito ativador de sinal](https://github.com/Marcondes-Amarante/circuitos-digitais/assets/117780345/cd635293-8cdc-4e57-8269-b4a04a4b05f9)

Vale ressaltar ainda o funcionamento dos leds de indicação da rodada relativos a identificação de quem é a vez de jogar e o que este encontra-se chutando, temos quatro leds nesse sentido são eles jogador A, jogador B, chutando X e chutando Y, os dois primeiros são norteados pela saída X da máquina de estados de transição de jogadores, que chega ao led jogador com sinal negado, acendendo caso x seja 0, e direcionado ao led jogador B sem complemento acendendo caso X seja 1, os dois últimos por sua vez alternam entre si conforme o sinal do pino próximo, acendendo chutando X caso próximo for 0 e chutando Y caso proximo for 1. Quanto a máquina de estados de transição de jogadores referida essa é composta por dois flip flops D, cujo primeiro recebe como sinal de excitação a saída de um XOR entre a saída do primeiro flip e a saída do segundo, e o segundo recebe como excitação a saída de um not que recebe o sinal de estado próximo gerado por si próprio. por fim, essa primeira seção ainda possui um mux que recebe como seletor o sinal do led referente a indicação de número negativo, e como entrada 0 o número escolhido e como entrada 1 seu equivalente complementado repassado este último enquanto saída caso o sinal de indicação de negação esteja ativado.

![primeira seção circuito main](https://github.com/Marcondes-Amarante/circuitos-digitais/assets/117780345/c222b309-2862-4ae7-9f48-677f9406beac)

A segunda seção é composta simplesmente pelo circuito cronômetro devidamente conectado a suas entradas de configuração (mode, altTemp, clear, pause) e modificação de dígitos (us, ds, um, dm), assim como suas saídas correspondentes aos displays hexadecimais equivalentes a cada dígito, o diferencial aqui vai para o botão pause, que além de quando acionado manualmente parar a contagem do cronômetro também é acionado caso X for 1 ou 0 através de um porta lógica OR, estando o cronômetro B a receber tal sinal negado, de modo a permitir que o jogador tenha seu cronômetro equivalente pausado quando não efetivamente for sua rodada.

Por fim a última seção do main é composto pelos leds de indicação de vitória ou empate, e comparação da soma das coordenadas com o ponto oculto, estes últimos ativados ao término de cada rodada, essa seção ainda conta com placares individuais de ambos os jogadores que consistem em contadores atualizados pela saída pontua A e pontua B do circuito core, direcionadas como sinal cont e clock, dos quais a cada sinalização positiva das saídas mencionadas o placar é incrementado em 1, além disso contamos com o circuito core em sua integralidade recebendo todas os sinais e métricas comparativas necessárias para validação e análise das jogadas e condições de vitória. 
 
![segunda e terceira seção circuito main](https://github.com/Marcondes-Amarante/circuitos-digitais/assets/117780345/52f6ddd0-f094-4fd1-88c6-a80d10aa29e6)

# Cronômetro:

Consiste em um subcircuito pertencente ao circuito main cuja função remete-se a exibição em dígitos individuais disposto como minutos e segundos em decremento, referente ao tempo individualmente restante para cada jogador quanto a realização de suas jogadas a cada rodada alternada. Em suma, o subcircuito em questão,  possui como entradas os pinos pause, altTemp, Mode e clear, e gera como saída 4 conjuntos de quatro bits que atuam individualmente como os dígitos de dezenas e unidades relativas aos minutos e segundos restantes dos jogadores. Seu funcionamento corresponde a uma máquina de estados utilizando a arquitetura de Moore, visto que suas saídas independe dos valores das entradas, onde a saída gerada passa por um circuito “subtrator” de subtraendo 1 que retroalimenta nossa entrada a partir de um distribuidor cujas saídas conectam-se a 4 flip-flops tipo D, um para cada bit, recebendo um sinal de clock central síncrono que determinar suas saídas Q, por conseguinte tais saídas são conectado novamente a um distribuidor cuja saída é ligada ao Subtrator repetindo o processo.

Vale ressaltar ainda o mecanismo utilizado para “pular” o decremento das sequências de bits correspondentes ao F até o A, para tal, o circuito utiliza-se de um “comparador” que verifica se o estado atual é 1111 (F) e caso seja, atualiza o estado próximo para 1001 (9), isso se dá através de um encadeamento de 3 multiplexadores cuja saída do primeiro é conectado a entrada 0 do segundo, e a saída do segundo é conectado como entrada 0 do terceiro. O primeiro mux não recebe bit algum como entrada 0, e tem uma constante 0000 conectada a entrada 1 que é repassada como saída quando simultaneamente os sinais dos pinos mode e clear, conectados a um AND, encontram-se ativados, esse componente em específico zera os dígitos constituintes do cronômetro. O segundo mux, recebe como entrada 0 a sequência de 4 bits repassada como saída do mux anterior, e como entrada 1 recebe uma constante 1001 (9), os 4 bits da entrada 1 são repassados como saída quando o sinal do seletor for 1, sendo este ativado apenas por um sinal repassado pela saída “igual” referente a um comparador que recebe os bits de estado próximo e uma constante 1111, isso garante que nossa sequência decremente de 9 até 0 e reiniciei. Por fim, o terceiro mux,recebe como entrada 0 a saída do mux anterior, e como entrada 1, um conjunto de quatro de bits gerados pelo subcircuito “simulador borda de subida” quando acionados simultaneamente os botões Mode e US, verificados através de um AND. O subcircuito em questão, replica através do mesmos componentes e elementos o comportamento de retroalimentação anteriormente mencionado quanto a máquina de estados de flip flops D de decremento de 9 a 0, com única ressalva para o clock, que diferente do circuito cronômetro é um sinal de pulso ativado apenas quando o botão US é apertado, nesse sentido, sua presença no possibilita alterar manualmente, no caso em questão, o valor da unidade de segundo, de modo que quando retorna ao funcionamento normal o decremento parte do número pelo qual alteramos nosso dígito de unidade. A saída do terceiro mux e conectada a um distribuidor de 4 saídas, onde cada saída será direcionada as entradas preset e clear dos flip flops, este último de forma negada, de tal forma que quando o dígito for 1 o sinal D do flip flop será 1, e caso seja 0, pela negação será 1 e ativará o clear, deixando o bit referente ao sinal do ff-d em questão como 0, e permitindo que o estado próximo seja moldado conforme o conjunto de bits atribuídos a entrada 1 dos mux em questão.

O conjunto de elementos e componentes de memória descritos acima se repete 4 vezes ao longo do circuito, com certas seções dotando-se de certas particularidades além da alteração do nome dos botões de mudança manual de dígito (DS, DM, UM) é claro,  a exemplo das seções de dezenas de segundos e dezenas de minutos, que quando sinalizado 1 para a condição “=” referente ao estado próximo F, reinicia a contagem partindo do dígito 5 (0101), além disso, devemos destacar que o decremento de tais seções ocorre apenas após o término de contagem do seção anterior, de modo que a cada término de ciclo um sinal positivo referente ao comparador é repassado a seção do circuito responsável pela dígito posterior do cronômetro, por exemplo, a seção do circuito responsável pela dezenas de segundos decrementa apenas quando a seção referente às unidades de segundo termina seu ciclo de contagem, que é sinalizada pelo sinal positivo da saída igual do comparador da seção anterior.

Vale ressaltar ainda o funcionamento do botão pause e da verificação de quando ambos os dígitos do cronômetro se encontram como zero, o primeiro consiste em um sinal negado conectado a entrada enable de cada flip flop D, que quando acionada direciona sinal 0 e impossibilita o funcionamento do clock. O segundo, por sua vez, consiste em um subcircuito denominado comparador de término que recebe todas as 4 combinações de bit referentes a cada dígito do cronômetro e o sinal do botão clear, internamente cada combinação é comparada com uma constante 0 e todos as saídas remetidas a condição de igualdade são direcionadas a um OR, que emite sinal positivo caso ambos as combinações forem iguais a 1 e o botão clear não se encontre efetivamente ativado.

![cronômetro](https://github.com/Marcondes-Amarante/circuitos-digitais/assets/117780345/6129550b-8a17-4d59-b95f-38e6b298c350)
